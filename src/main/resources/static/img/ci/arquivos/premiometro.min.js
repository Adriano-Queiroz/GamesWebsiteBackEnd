function Premiometro($Premio,$Vencedores,endpoint,apiKey){var p=this;p.$premio,p.$vencedores,p.today="",p.day="2024-01-01",p.apiKey,p.base_url,p.interval=0,p.current={},p.fInt=new Intl.NumberFormat("pt-BR",{style:"decimal",maximumFractionDigits:0}),p.fDec=new Intl.NumberFormat("pt-BR",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}),p.init=function(){p.$premio=jQuery($Premio),p.$vencedores=jQuery($Vencedores),p.apiKey=apiKey,p.base_url=endpoint,p.today=(new Date).toISOString().split("T")[0],p.getExternalData()},p.getExternalData=function(){jQuery.ajax({url:p.base_url,method:"GET",headers:{"x-api-key":p.apiKey},success:p.start,error:console.error})},p.intervalNumbers=()=>{p.interval>0&&clearInterval(p.interval),p.interval=setInterval(p.updateFrontVars,1e3)},p.start=function(data){p.current=Object.assign({},data),p.intervalNumbers()},p.updateFrontVars=function(){let today=(new Date).toISOString().split("T")[0],ret=p.translate(p.current.winners_min,p.current.winners_max,p.current.reward_min,p.current.reward_max);p.$vencedores.text(p.fInt.format(ret.currentWinners)),ret.currentReward=ret.currentReward.toString(),ret.currentReward=ret.currentReward.replace(/.$/,"0"),ret.currentReward=parseInt(ret.currentReward),p.$premio.text(p.fDec.format(ret.currentReward)),p.today!=today&&(p.today=today,p.newDay())},p.translate=function(winners_min,winners_max,reward_min,reward_max){const startSeconds=28800,endSeconds=72e3,durationSeconds=43200,winnersDifferencePerSecond=(winners_max-winners_min)/43200,rewardDifferencePerSecond=(reward_max-reward_min)/43200,now=new Date,currentSeconds=3600*now.getHours()+60*now.getMinutes()+now.getSeconds();if(currentSeconds<28800)return{currentWinners:winners_min,currentReward:reward_min};if(currentSeconds>72e3)return{currentWinners:winners_max,currentReward:reward_max};if(currentSeconds>=28800&&currentSeconds<=72e3){const currentWinners=Math.floor(winners_min+winnersDifferencePerSecond*(currentSeconds-28800)),currentReward=Math.ceil(reward_min+rewardDifferencePerSecond*(currentSeconds-28800));return{currentWinners:currentWinners,currentReward:currentReward}}return{currentWinners:0,currentReward:0}},p.init()}
//# sourceMappingURL=premiometro.min.js.map